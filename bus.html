<!DOCTYPE html>
<html ng-app="busApp">

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1, user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<title></title>
		<link rel="stylesheet" href="css/bus.css" />
		<link rel="stylesheet" href="css/mui.min.css">
		<script src="js/angular.min.js" type="text/javascript" charset="utf-8"></script>
		<style type="text/css">
			#list {
				/*避免导航边框和列表背景边框重叠，看起来像两条边框似得；*/
				margin-top: -1px;
			}
			
			.mui-plus .plus {
				display: inline;
			}
			
			.plus {
				display: none;
			}
			
			#middlePopover_one .mui-popover-arrow {
				visibility: hidden;
			}
			
			#middlePopover_two .mui-popover-arrow {
				visibility: hidden;
			}
			
			#middlePopover_three .mui-popover-arrow {
				visibility: hidden;
			}
			
			#middlePopover_four .mui-popover-arrow {
				visibility: hidden;
			}
			
			#middlePopover_five .mui-popover-arrow {
				visibility: hidden;
			}
			
			p {
				text-indent: 22px;
			}
			
			span.mui-icon {
				font-size: 14px;
				color: #007aff;
				margin-left: -15px;
				padding-right: 10px;
			}
			
			#middlePopover_one.mui-popover {
				width: 80%;
				height: 220px;
			}
			
			.mui-popover {
				width: 80%;
				height: 200px;
			}
			
			.mui-content {
				padding: 10px;
			}
		</style>
	</head>

	<body ng-controller="busCtrl as ctrl">
		<div class="main">

			<div class="title">
				<div class="title_img">
					<a href="home.html"><img src="img/back.png" /></a>
					
				</div>
				<h4>公交</h4>
			</div>

			<div class="banner">
				<p></p>
				<div class="banner_list">
					<div class="mui-content">
						<ul class="mui-table-view">
							<li class="mui-table-view-cell banner_list_li">

								<div class="mui-content-padded banner_list_div">
									<p style="text-indent: 0;">
										<a href="#middlePopover_one" class="mui-navigate-right mui-btn mui-btn-primary mui-btn-block mui-btn-outlined">
											&nbsp;&nbsp;&nbsp;&nbsp;查询公交站台信息
										</a>
									</p>
								</div>

							</li>
							<li class="mui-table-view-cell banner_list_li">

								<div class="mui-content-padded banner_list_div">
									<p style="text-indent: 0;">
										<a href="#middlePopover_two" class="mui-navigate-right mui-btn mui-btn-primary mui-btn-block mui-btn-outlined">
											&nbsp;&nbsp;&nbsp;&nbsp;查询公交位置
										</a>
								</div>

							</li>
							<li class="mui-table-view-cell banner_list_li">

								<div class="mui-content-padded banner_list_div">
									<p style="text-indent: 0;">
										<a href="#middlePopover_three" class="mui-navigate-right mui-btn mui-btn-primary mui-btn-block mui-btn-outlined">
											&nbsp;&nbsp;&nbsp;&nbsp;查询路况
										</a>
									</p>
								</div>
							</li>
							<li class="mui-table-view-cell banner_list_li">

								<div class="mui-content-padded banner_list_div">
									<p style="text-indent: 0;">
										<a href="#middlePopover_four" class="mui-navigate-right mui-btn mui-btn-primary mui-btn-block mui-btn-outlined">
											&nbsp;&nbsp;&nbsp;&nbsp;查询公交车的速度
										</a>
									</p>
								</div>
							</li>
							<li class="mui-table-view-cell banner_list_li">

								<div class="mui-content-padded banner_list_div">
									<p style="text-indent: 0;">
										<a href="#middlePopover_five" class="mui-navigate-right mui-btn mui-btn-primary mui-btn-block mui-btn-outlined">
											&nbsp;&nbsp;&nbsp;&nbsp;查询车载容量
										</a>
									</p>
								</div>
							</li>
						</ul>
					</div>
				</div>
			</div>

			<div id="middlePopover_one" class="mui-popover">
				<div class="bus_x">
					<p>公交站台信息</p>
					<hr />
				</div>

				<div class="se">
					<select id="select1">
						<option value="1号站台">1号站台</option>
						<option value="2号站台">2号站台</option>
					</select>
				</div>
				<button type="submit" id="button1">查询</button>

				<div class="ztXinxi" style="display: none;">
					<p><span class="span1"></span>号公交距离<span class="span2"></span>米</p>
					<p><span class="span3"></span>号公交距离<span class="span4"></span>米</p>

				</div>
			</div>

			<div id="middlePopover_two" class="mui-popover">
				<div class="bus_w">
					<p>公交位置</p>
					<hr />
				</div>

				<div class="se">
					<select id="select2">
						<option value="1号公交车">1号公交车</option>
						<option value="2号公交车">2号公交车</option>
					</select>
				</div>
				<button type="submit" id="button2">查询</button>
				<div class="weizhi">
					<p><span class="weizhi_span1"></span>位置：<span class="weizhi_span2"></span></p>
				</div>
			</div>

			<div id="middlePopover_three" class="mui-popover">
				<div class="bus_l">
					<p>路况</p>
					<hr />
				</div>

				<div class="se">
					<select id="select3">
						<option value="1号公路">1号公路</option>
						<option value="2号公路">2号公路</option>
						<option value="3号公路">3号公路</option>
						<option value="4号公路">4号公路</option>
						<option value="5号公路">5号公路</option>
						<option value="6号公路">6号公路</option>
						<option value="7号公路">7号公路</option>
						<option value="8号公路">8号公路</option>
					</select>
				</div>
				<button type="submit" id="button3">查询</button>
				<div class="lukuang">
					<p><span class="lukuang_span1"></span>路况：<span class="lukuang_span2"></span></p>
				</div>
			</div>

			<div id="middlePopover_four" class="mui-popover">
				<div class="bus_s">
					<p>公交速度</p>
					<hr />
				</div>

				<div class="se">
					<select id="select4">
						<option value="1号公交车">1号公交车</option>
						<option value="2号公交车">2号公交车</option>
					</select>
				</div>
				<button type="submit" id="button4">查询</button>
				<div class="sudu">
					<p><span class="sudu_span1"></span>:<span class="sudu_span2">暂无速度</span></p>
				</div>
			</div>

			<div id="middlePopover_five" class="mui-popover">
				<div class="bus_r">
					<p>车载容量</p>
					<hr />
				</div>

				<div class="se">
					<select id="select5">
						<option value="1号公交车">1号公交车</option>
						<option value="2号公交车">2号公交车</option>
					</select>
				</div>
				<button type="submit" id="button5">查询</button>
				<div class="rongliang">
					<p><span class="rongliang_span1">1号公交车</span>车载容量：<span class="rongliang_span2"></span></p>
				</div>
			</div>

		</div>
		<script src="js/mui.min.js"></script>
		<script src="js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			mui.init()
		</script>
		<script type="text/javascript">
			var busApp = angular.module("busApp", []);
			busApp.controller("busCtrl", ["$http", function($http) {
				$("#button1").click(function() {
					$(".ztXinxi").toggle();

					var select1 = $("#select1 option:selected").val();
					if(select1 == "1号站台") {
						var d = 1;
					} else {
						var d = 2;
					}

					$http({

						method: "POST",
						url: "http://192.168.43.30:8890/type/jason/action/GetBusStationInfo",
						data: {
							"BusStationId": d
						},
						headers: {
							'Content-Type': 'application/x-www-form-urlencoded'
						}

					}).then(function success(resp) {
						var span1 = resp.data[0].BusId;
						var span2 = resp.data[0].Distance;
						var span3 = resp.data[1].BusId;
						var span4 = resp.data[1].Distance;
						$(".span1").html(span1);
						$(".span2").html(span2);
						$(".span3").html(span3);
						$(".span4").html(span4);
					}, function error(resp) {

					});
				});

				$("#button2").click(function() {

					var select2 = $("#select2 option:selected").val();
					if(select2 == "1号公交") {
						var d2 = 1;
					} else {
						var d2 = 2;
					}

					$http({

						method: "POST",
						url: "http://192.168.43.30:8890/type/jason/action/GetBusLocationAction",
						data: {
							"BusId": d2
						},
						headers: {
							'Content-Type': 'application/x-www-form-urlencoded'
						}

					}).then(function success(resp) {
						var weizhi_span1 = resp.data.BusLocaton;

						$(".weizhi_span1").html(select2);
						$(".weizhi_span2").html(weizhi_span1);
					}, function error(resp) {

					});
				});

				$("#button3").click(function() {

					var select3 = $("#select3 option:selected").val();
					if(select3 == "1号公路") {
						var d3 = 1;
					} else if(select3 == "2号公路") {
						var d3 = 2;
					} else if(select3 == "3号公路") {
						var d3 = 3;
					} else if(select3 == "4号公路") {
						var d3 = 4;
					} else if(select3 == "5号公路") {
						var d3 = 5;
					} else if(select3 == "6号公路") {
						var d3 = 6;
					} else if(select3 == "7号公路") {
						var d3 = 7;
					} else {
						var d3 = 8;
					}

					$http({

						method: "POST",
						url: "http://192.168.43.30:8890/type/jason/action/GetRoadStatus",
						data: {
							"RoadId": d3
						},
						headers: {
							'Content-Type': 'application/x-www-form-urlencoded'
						}

					}).then(function success(resp) {
						var lukuang_span2 = resp.data.Status;

						$(".lukuang_span1").html(select3);
						$(".lukuang_span2").html(lukuang_span2);
					}, function error(resp) {

					});
				});

				$("#button4").click(function() {

					var select4 = $("#select4 option:selected").val();
					if(select4 == "1号公交") {
						var d4 = 1;
					} else {
						var d4 = 2;
					}
					$http({

						method: "POST",
						url: "http://192.168.43.30:8890/type/jason/action/GetBusSpeed",
						data: {
							"BusId": d4
						},
						headers: {
							'Content-Type': 'application/x-www-form-urlencoded'
						}

					}).then(function success(resp) {
						var sudu_span2 = resp.data.BusSpeed;

						$(".sudu_span1").html(select4);
						$(".sudu_span2").html(sudu_span2);
					}, function error(resp) {

					});
				});

				$("#button5").click(function() {

					var select5 = $("#select5 option:selected").val();
					if(select5 == "1号公交") {
						var d5 = 1;
					} else {
						var d5 = 2;
					}
					$http({

						method: "POST",
						url: "http://192.168.43.30:8890/type/jason/action/GetBusCapacity",
						data: {
							"BusId": d5
						},
						headers: {
							'Content-Type': 'application/x-www-form-urlencoded'
						}

					}).then(function success(resp) {
						var rongliang_span2 = resp.data.BusCapacity;

						$(".rongliang_span1").html(select5);
						$(".rongliang_span2").html(rongliang_span2);
					}, function error(resp) {

					});
				});

			}]);
		</script>
	</body>

</html>